mixin field(labelname, name)
	div.field
		label= labelname
			<br/>
			input(type="text", name=name, value="")

doctype html
html(lang="en")
	head
		title= title
		meta(http-equiv="Content-Type", content="text/html; charset=utf-8")
		link(rel="stylesheet", href="/static/css/main.css", type="text/css")
		
		script(src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js")
		script(type="text/javascript").
			$(function() {
				$('.newplayer button').on('click', function() {
					data = {};
				
					$('input').each(function(i, el) {
						data[$(el).attr('name')] = $(el).val();
					});
				
					$.post('/player/new', data, function(data) {
						$('.ratingtable table').append('<tr>'+
							'<td>0</td>'+
							'<td>'+ data.player.firstname + ' ' + data.player.lastname +'</td>'+
							'<td>'+ data.player.city +'</td>'+
							'<td>'+ data.player.tournaments +'</td>'+
							'<td>'+ data.player.seasonTournaments +'</td>'+
							'<td>'+ data.player.games +'</td>'+
							'<td>'+ data.player.wins +'</td>'+
							'<td>'+ data.player.loses +'</td>'+
							'<td>'+ data.player.winsPercent +'</td>'+
							'<td>'+ data.player.rating +'</td>'+
							'<td>'+ data.player.rang +'</td>'+
						'</tr>');
					});
					
					return false;
				});
			});
			
		style.
			.newplayer {
				float: left;
			}
			.ratingtable {
				float: right;
				width: 80%;
			}
			.ratingtable table {
				border-collapse: collapse;
			}
			.ratingtable th {
				font-size: 12px;
				border: 1px solid #000;
				padding: 10px;
			}
			.ratingtable td {
				border: 1px solid #000;
				padding: 10px;
			}
	body
		div.newplayer
			Добавить игрока
			
			each field, index in fields
				+field(field.label, field.name)
			
			div.buttons
				button send
				
		div.ratingtable
			table
				tr
					th='№'
					th='Имя'
					th='Город'
					th='Кол-во турниров'
					th='Кол-во турниров в сезоне'
					th='Кол-во игр'
					th='Побед'
					th='Поражений'
					th='% побед'
					th='Рейтинг'
					th='Ранг'
					
				each row, index in rows
					tr
						td=0
						td=row.firstname + ' ' + row.lastname
						td=row.city
						td=row.tournaments
						td=row.seasonTournaments
						td=row.games
						td=row.wins
						td=row.loses
						td=row.wins_percent
						td=row.rating
						td=row.rang
						